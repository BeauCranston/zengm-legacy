DB CHANGES SINCE 3.3.0
----------------------

TEAM.VALUECHANGE REVAMP
-----------------------

IMPORTANT http://www.reddit.com/r/BasketballGM/comments/20i6v3/still_too_easy_to_trade_for_drafted_players/
  just drafted players are undervalued, possibly related to the following issue
PER scaling in player.value is wrong http://www.reddit.com/r/BasketballGM/comments/1y2lci/some_thoughts/cfgz8yk
  change scaling in ovr formula? too confusing?
  this impacts rookie values, leating to an EXPLOIT: http://www.reddit.com/r/BasketballGM/comments/1y2lci/some_thoughts/cfhkvnv
ovr changes should impact player.value, somehow
  probably by scaling PER from the previous season
    but what about old players? is this already factored in to the age decline in player.value?
    but are past years ratings always available from player.value? or is it sometimes done with fake player objects? need to check
  http://www.reddit.com/r/BasketballGM/comments/1ydtpd/seems_much_more_random_now/cfjxhj6
    teams do overvalue their own players in trades, generally
second round draft picks are undervalued. also, giving away a pick should never make a trade worse, but sometimes it does now.
release and resign pick exploit http://www.reddit.com/r/BasketballGM/comments/1zn61h/finances/cfvzr35\
some limit on trades so people can't make 1000 slightly beneficial trades: http://www.reddit.com/r/BasketballGM/comments/1zzwbs/suggestions_on_trades/cg0e0dg
  probably make opposing owners less likely to trade as the number of proposed trades increases in a season
Eventually:
  "What would make this work?" functions should know about contending/rebuilding. Contending teams should be more eager to offer up young/cheap players, rebuilding teams should be more eager to offer up old/expensive players
    basically, they should view the trade from the other team's perspective, not just their own
  Can I provide better feedback about trade? Like if it's close or not? Or if it's rejected because of cap space issues?
  Set params with optimization algorithm
  Fix needToDrop stuff
    Problem now is, contract gets pushed into someone on the roster and it's lost. This is especially obvious if there is only one player in add and his contract is pushed to roster, then the trade is nothing.
    Probably not that important, since teams almost always have shitty players at the end of their rosters
  EXPLOIT that might be tricky to solve: in the "resigning players" phase, your free agents should still count towards your cap. Otherwise, you can trade to take on salary and then sign your players over the cap
  Should draft pick contract "worth" be determined better somehow, like it is for normal contracts? probably yes
    does this allow removal of fudge factor?
  population (i.e. richness) should influence opinion of contracts

CURRENT
-------

with createObjectURL, can I export entire leagues easily?
make scoring a little more uneven, so league leaders have higher PPG
upcoming free agents
  off by one contract year?
  should be visible all the time, not blocked by FA limit page
account
  add promo stuff to welcome email (twitter, reddit, feedback request)
  widget
    get rid of right margin somehow, like for logo? most visible on small screens
  somehow periodically run util.account.check, which will check for login and for local achievements to send to cloud
    is this necessary?
  more pages
    account/edit
    account/:username (public profile showing achievements)
Achievements to add
  longeivity: play 10, 100, 1000 seasons in a singel league
  lucky/unlucky win/lose game 7 in OT
  underdog: things like winning title as 8 seed, etc
  win title without making a trade
  career stat milestone for players on your team from draft to the milestone
mobile UI
  slide in full height menu from right, like facebook or android's DrawerLayout
option to keep your player stats in improve performance http://www.reddit.com/r/BasketballGM/comments/1xgo2q/delete_old_player_stats_keep_your_teams_old/
edit/delete player
  share code with create a player
    contract?
  do the whole thing through knockout, based dynamically on player object? would allow for some nice things like easily computing ovr
move manual to wordpress
  " < Basketball GM Manual" in title
  search for any manual links
"Watch list" of players the user is interested in, mainly for free agency
  add "actions" where appropriate, probably as output in player.filter so it can be used elsewhere
    negotiate
      factor out negotiateButton code from freeAgents and negotiationList and player page (if possible)
      some heuristic to see if player is a negotiable
      show mood too?
    draft, fantasy draft
      if prospect, add "draft" button?
      if so, factor out from draft page and add on player page
    ADD TO PLAYER PAGE, elsewhere?
show prospects before draft
  EVENTUALLY
    ratings should really update annually, just like in normal years
      fuzz changing for prospects should factor in changes in scouting budget
    movement between draft classes
      allow promising to draft a player at certain position to influence decision
customization
  allow import of team info or draft classes from roster files
  allow upload of just these files from the "new league" screen, somehow
  popRank/difficulty being set correctly for uploaded rosters, on new league screen and elsewhere?
career stats
  "All Seasons" option - add each unique player/season combo as a row, include column for year
  column/table widths?
  EWA in averages should be average
    if i change how it comes from player.filter, make sure it doesn't fuck up HoF
    same with per36
per36, totals, playoffs options elsewhere
  currently in playerStats and watchList, but too much copy/paste. refactor before expanding
  team history
  roster
per 36 stats in player pages http://www.reddit.com/r/BasketballGM/comments/1ofz6s/per36_stats/
  already implemented for stats page, but should it be a separate entry from player.filter like playoffs? totals isn't. maybe should just be a dropdown to change this all on the player page?
when left menu is shown (lg), don't show the same top menus (only tools and help). but adding hidden-lg to top menu items makes them persist when going from league to non-league dashboard
switch to bitbucket issues
  DON'T ADD ANYTHING NEW HERE!
  gradually move these issues over
  move over github issues
http://www.reddit.com/r/BasketballGM/comments/1sarll/open_source/cdxx3ql
free agents going unsigned?
  salary cap exception? too complicated?
    how much?
    who gets it? only if over cap when free agency starts?
    messages about it
      anywhere salary cap is displayed, including team finanaces
      contract negotiation - show warning if the exception will be used
      resigning players page
      update manual
    implementation
      flag in root of team object - exception available, exception used, exception not granted this season
  add some fucking market shit. calculate the salary demanded by free agents vs cap space available, then adjust free agent demands somehow
    this should be part of the daily updating. if everyone is capped out, drop all salaries to minimum.
notification system
  customize: http://www.reddit.com/r/BasketballGM/comments/1re3ea/new_feature_notification_bubbles/cdmjdyn
  "healed" should show after game, not before
  when fading out, hover should stop animation, remove notification-delete, reset timer to 1s (or something)
    hover on fading in should also stop animation so there is no stutter
  what about for small screens? maybe just show one at a time. is this actually a problem?
  event log
    allow filtering based on type
  also log these events:
    trades
      for user, don't show notification, but log
    user draft picks
      don't show notification, but log
    fired - log, but don't show
    new team
    big AI moves - trades, free agent signings
      only show big moves, not all. need some threshold
      all could still be stored to db, just not shown http://www.reddit.com/r/BasketballGM/comments/1valwk/suggestion_running_list_of_fa_signing/
  notify when something happens to a player on the watch list
  merge "retired" and "HOF" notifications for a player on the user's team
  important notifications should be a different color, maybe require acknowledgement before closing
    errors
    refuse to sign
    retire
  colors/icons for good/bad things http://www.reddit.com/r/BasketballGM/comments/22bpwm/suggestion_notification_improvements/
NaN http://www.reddit.com/r/BasketballGM/comments/1ts98f/nan_and_nanm_errors/cerc924
Team name shows up as BOLD or is highlighted in some other way in all League lists (playoffs, standings)
  wrap abbrev in function before display
  maybe allow wrapping of arbitrary strings, not just abbrevs? then pass tid or abbrev as second param
gracefully handle disk space errors

PLAYER DEVELOPMENT REVAMP
-------------------------

player development revamp
  something needs to be done. still too many 3 point shooting centers.
  are ovr/pot combos reasonable, since ovr is weighted now?
  low ovr high pot players should pan out more?
  old stars should exist
  reports that there are too many PGs with high pot - probably because they can't improve hgt, and hgt is highly weighted in ovr
  really high ovr/pot is handled poorly, rapid declines if there is a gap
  too many rookies come in as instant stars. should be more gradual.
  career arcs for ratings - like low endurance/athleticism for old players, but skills remain
  make low ovr high pot players more likely to improve

options:
  compute "pot" for each rating, use that to generate displayed pot
  somehow do it organically, with different rates of growth in different categories

BIG NEW FEATURES
----------------

trading block should allow for multiple (different) offers from the same team
display of relative ratings like https://mail.google.com/mail/u/0/#inbox/144a4a04330edf3d
trade improvements
  refactor trade module with all the below in mind
    clean up even more?
      should create and updatePlayers be merged? updatePlayers already updates tids too
      either way, they should take partial objects and fill in the default/existing values
  trade suggestions (and trading block) should know salary rules
    HOW?
    team.valueChange could be made fast if I allow an extra argument to pass pre-fetched values from the database
    quick fix: check box to only look for teams under the cap http://www.reddit.com/r/BasketballGM/comments/1qh107/proposed_trades_question/
  trades between AI teams
    call team.checkRosterSizes after this if it's in between days
team switching after being fired
  keep track of what team the user controlled, so stats for the user (not the team) can be shown
team and league records (highest scoring game, etc)
  should show an event for cool single game feats
random events
  like.. player gets suspended, out X games. or player gets into fight, fan support drops. etc.
  need a notification system first
more detailed draft - slower picks, trades, etc.
  custom draft classes http://www.reddit.com/r/BasketballGM/comments/1r0ftx/nba_2k2/cdj769w
  slower picks http://www.reddit.com/r/BasketballGM/comments/1r70dv/trade_picks_during_draft
  sort by generic value (current) or team-specific value
  trade picks - note that the code in teamValue will need to be modified to account for the lottery and available players in the draft class
power rankings
  preseason too
  awards watch
player editor, for customizing rosters
popup next to player name with quick view of key stats/ratings
contests: post roster file and goal

BIG NEW GAMEPLAY CHANGES
------------------------

Extended free agency
  order of AI team signings shouldn't be linear
  0 year contracts http://www.reddit.com/r/BasketballGM/comments/1p0sa8/new_feature_extended_free_agency/ccy4gvp
  AI teams can release players to sign a better free agent?
fix contracts, signing
  goal: reasonable total payrolls, no good free agents left every season
  if WS distribution matches NBA, then look at $ vs WS. even better, build a multivariate model with age
  contracts should take ratings into more account, since stats on a good team are inflated and stats on a bad team are depressed
  player contract amounts http://www.reddit.com/r/BasketballGM/comments/1kj0p0/can_i_turn_off_firing/cbpxjyj?context=3
revamp position assignment algorithm
  until a player is ~28 (whenever ratings decline starts), recalculate every year
gameSim
  pos/neg effects add on like civ4 defensive bonuses?
  balance http://www.reddit.com/r/BasketballGM/comments/1jfcjw/game_imbalance_fc_with_rdi/ http://www.reddit.com/message/messages/1097mj
  http://www.reddit.com/r/nba/comments/1j1e6q/i_made_a_singleplayer_basketball_management/cbfzr43?context=3 http://www.reddit.com/r/BasketballGM/comments/1k1881/pf_stands_for_powerful/
    too easy to get high percentage inside looks even with a team of all bigs?
    or should some of the "bigs" really be smalls, just mislabeled as PFs?
  make it less easy to get high percentage shots if there is no ball handling
    tweak perimFactor and synergyFactor.
  increase turnovers, particularly if perimFactor (or similar) is low
  increase fouls if perimFactor (or similar) is low
  assists should be function of speed, since those players have the ball more
  situational awareness http://www.reddit.com/r/BasketballGM/comments/1yg6wi/end_of_game_simulation/
  mediocre players on bad teams should be less efficient (shouldn't put up such a high PER, which falls if they join a good team)
do ratings make sense? http://www.reddit.com/r/BasketballGM/comments/1pd37p/rookie_players_with_lots_100_skill_ratings/
contract negotiation
  don't have counter-offers be too drastic
  weirdness
    http://www.reddit.com/r/nba/comments/1j1e6q/i_made_a_singleplayer_basketball_management/cbabaq1
    http://www.reddit.com/r/BasketballGM/comments/1j3it8/free_agency_bug/
    http://www.reddit.com/r/BasketballGM/comments/20k310/may_have_encountered_a_bug_during_contract/
  add free agent to the end of roster
  http://www.reddit.com/r/BasketballGM/comments/1ykybp/free_agent_signing_suggestion/
fuzz should affect potential more than other variables, when pot is different than ovr

MINOR FIXES
-----------

Number of years in college should depend on talent level
DataTables - fix default sort order on column click
  text should be asc, numeric should be desc (except draft picks)
  http://datatables.net/ref#asSorting will work. maybe pass it as an option to bbgm_datatable
  but can it be set globally, based on column type? can have ui.datatable automatically read columns and figure it out?
Add MVP and Titles columns to HoF table
Make good young players much less likely to become FAs
Make rookie contracts 1 year longer
top menu tooltips for md
show team records in playoffs, conference standings
don't need to store abbrev with awards, just tids
  fix display in season summary (correct in historyAll)
show team records in playoffs page
on team history, show counts of conf/league championships, hall of fame players, etc
if a player refuses to resign, that decision should also be reflected in free agency (don't recalculate mood)
add "drb" to usage so that good ball handlers shoot more (favor guards over bigs more)
in player page, show red/green for ratings changes from the previous year, maybe as heatmap
in ratings tables, show dpot and dovr columns? maybe?
more owner messages - crowdsource? especially intro
Add markers for clinching playoffs / 1st seed in league standings
trading block crashing bug
  happens in chrome in old leagues, apparently. running out of memory somehow?
expand play menu so it can be used with one click http://www.reddit.com/r/BasketballGM/comments/1ry65b/best_method_of_giving_feedback_and_requesting_new/cds6hph
injuries
  make injuries more likely for fatigued players?
  long-term effects of injuries - maybe just decrease endurance
first errorNotify in contractNegotiation.js really should be inline within that page
league leaders glitch http://www.reddit.com/r/BasketballGM/comments/1r20x5/league_leaders_bug/
merge game.play and freeAgents.play
make sure the changes alert and the "refuses to negotiate" alert both look good
  link to player in "refuses to negotiate" alert
replace random.gauss with random.realGauss
current season shouldn't show in league history page dropdown
make trade counter-offer faster by checking if no trade is possible first http://www.reddit.com/r/BasketballGM/comments/1jumc9/is_it_just_me_or_does_it_take_wayyyy_too_long_for/
document things that affect player mood
show four factors somewhere
security
  validate any user-added content, like custom team names (both in file and through form), custom players, and league names
in playoffs, replace "play week" with "play until end of round"
IE11 testing
don't need to check every team's roster limits every time games are played - could auto keep AI teams in line after any trade (with user or between AI teams), and then only the user's team needs to be checked
reorganize top menu
not all ratings should deteriorate equally with age (e.g. 3 point shooting)
http://code.google.com/p/htmlcompressor/ or something similar
in playoffs, replace Week/Month in Play menu with Round http://www.reddit.com/r/BasketballGM/comments/1w55sb/suggestionplayoffs_simulate_by_round_instead_of/

LOW PRIORITY
------------

tanking is too easy http://www.reddit.com/r/BasketballGM/comments/20038f/too_easy_to_tank/
contractNegotiation
  young players should only want short deals if they have really high pot-ovr
box plots / distributions
  "it'd be great to overlay your roster to see where you stand. Maybe click on a name in a list to add or remove it from the display. Do I have a fast team? Do I have a three point shooting team? Are we big and bruising and slow?"
ratings change during the season, especially young players (development)
show abbrev and highlight user's players in retired players list gavin.handley@gmail.com
compare players http://www.reddit.com/r/BasketballGM/comments/1saclf/suggestion_compare_players/
awards
  show awards count in hall of fame
NaN
  NaN in EWA: http://www.reddit.com/r/BasketballGM/comments/1r1i1e/nan_on_ewa_estimated_wins_added/
  NaN appears in new contract demands for some players sometimes, mainly when I'm skipping stuff
add numbers for players
  ability to retire numbers
some players should make bad plays - not everyone should have same basketball IQ in gameSim
  add a rating for basketball IQ?
client-side error tracking
  see kentavious for the problems with that
fantasy draft
  when fantasy draft is over, go to summary of the draft
    do this in core.draft.untilUserOrEnd
  make tables sortable
  add entry for fantasy draft summary to draft history dropdown?
league settings
  enable buy out button or not
  set salary cap, luxury tax, exceptions, etc
  enable/disable trading rules
cross-league play
mobile UI, bootstrap 3
  do something about hover tooltips
    injury
    skills
      for injury and skills, maybe make the whole block a hyperlink that opens a popover
        make sure to use on player page too.. can i use helpers.playerName.. there too?
    table headers
    others?
  any columns: *em css - can't i make columns use bootstrap?
some kind of playoff series overview page, including box scores for easy access
luxury tax money should be redistributed to non-taxpaying teams (or teams under the cap?)
jslint errors
  currently just "Don't make functions within a loop." which should all be fixed eventually
  can I get rid of all the "is OK" lines?
  jshint?
A year-to-date comparison of team finances with the previous year.
better core.player.ovr formula
  regression: player = require('core/player'); player.regressRatingsPer();
    weight by minutes played
  THIS NEEDS TO BE UPDATED WHEN PLAYER GENERATION/DEVELOPMENT OR GAMESIM CHANGES!
team names from db
  option to load from JSON file on "Edit Team Info"
  export rosters should include teams
    option to include just team names or just players
    should update popRank when custom teams are supplied
  not so simple to allow abbrevs to be changed, since they are used elsewhere for convenience - damn indexeddb and denormalization!
popRank never updates, but I don't think it matters.
different owner personalities, with different priorities
trades
  "undo" button for accidental trades
    transaction log first. put "Undo" button after message from other GM only right after a trade finishes. make sure it doesn't show up at other time
      only allow undo if dbChange hasn't changed since the transaction was logged
  "When signing free agents, if you offer then a contract 2 years longer/shorter than the one they want, they'll counter offer one with 1 more/less year. If you offer the same amount of money you previously offered, and change the year to what they want, they'll automatically offer the lowest $ for that amount of years."
transaction log
  put index on pids involved, so then events involving a player can be shown on player page
more detailed player moods - http://www.reddit.com/r/BasketballGM/comments/1k4val/players_refusing_to_sign_bug/cbln1oo?context=3
  player personality, team chemistry
  http://www.reddit.com/r/BasketballGM/comments/1tkw3e/idea_player_traits/
strategy shouldn't be set randomly at start of new league
dashboard info should be on a widget accessible from any screen
some UI indicating how players developed over the offseason
  integrated into roster, or separate page?
player search page
  show stats, ratings, contract, etc. (customizable); allow filters to be applied. also filter by skill icon
finances
  too easy to make big $$$
    owner should take profits each year
  AI teams should adjust spending
player morale - punishment for tanking
team colors, and uniforms in player icons
harsher, more realistic luxury tax
midlevel exception
playerNameLabels should also put a little hover box over the player link with key stats/ratings
more refined control of playing time
  http://www.reddit.com/r/nba/comments/1j1e6q/i_made_a_singleplayer_basketball_management/cbaegpq
  http://www.reddit.com/r/BasketballGM/comments/1qaml8/playing_time_explain_to_me_like_im_8/
  just set minutes directly? any minutes not included, leave up to coach's discretion
fake feet/inches heights should be taller
draft
  randomness in picks should factor in relative ratings http://www.reddit.com/r/BasketballGM/comments/1l1713/the_draft_still_needs_some_work_it_seems_my/cbutw7v?context=1
  somehow allow uploading of custom draft classes
trades between AI teams
  each day, pick two random teams. if a trade can be found that both teams like, do it
    generalize core.trade.makeItWork and other parts of core.trade
  transaction log is necessary to keep tabs on this stuff
  also propose trades to the user, somehow
"coaches" should factor in synergy in gameSim substitutions
IE10 support
  dropdowns disappear on refresh?
    unit tests fail too, seemingly for the same reason
  text in dashboard is messed up
core.team.valueChange should be used to pick which free agents to sign in core.freeAgents.autoSign, but that would be a bitch beacuse of how transactions are set up
  also for resigning players in core.season
trades
  cash
    estimate value of cash - different for different teams? depending on cash, net profit recently, and market size
    upper limit? what is NBA rule?
  more feedback from AI
    if trade is close/far from working, return different messages
    display some indication of what a team wants to do on the trade view, e.g.
      "I need to cut my payroll and start making more money."
      "I could really use a good rebounder."
  sign and trade (only during resigning phase)
profits too large, too easy
  add corporate tax?
  luxury tax increases for repeat offenders?
only show retired players in season summary if they actually played some
components.dropdown tests are very slow in chrome
export/import roster
  some way to specify startingSeason
  download link performance
    http://mjtemplate.org/examples/rison.html
    something besides a data URI?
    no base64? Firefox can't handle #
  error handling if blank or invalid file is supplied
  easily edit in excel?
move most db functions into core.whatever. db should just be about initializing/upgrading
  get rid of "db" module dependence
core.freeAgents should be core.freeAgent or core.freeAgency?
after last resigning negotiation, switch to next phase?
draft lottery
  do a dramatic presentation?
  increase hype for teams that exceed expectations
  tied records?
how to handle aggregating stats for players who played for more than one team in a season? add them all up in ps in db.getPlayers
  for roster, want just a player's stats with this team this season
    this currently works, just pass a tid
  for player stats view, want total among all teams for one season
    no pass tid and you only get the latest row. need added logic to do sum
  for player view, want separate and combined rows in careerStats without fucking up totals (including PER)
    no pass tid and you get each team separately, but no merged stats as above
contracts
  maybe make them nonlinear.. role players lower, stars higher
    compare to NBA contract distribution
luxury tax should be disbursed amongst non-taxpaying teams
team.rosterAutoSort should automatically set dbChanged, and have an option to not if that's important
test trades more
  multi-player valuation
    rank players by value. each additional value gets some multiplier to diminish its influence. this prevents adding a player to a trade from decreasing its value
    but this should have something to do with the difference between numbers of players on each side?
if fouling out drops team below 5 active players, play fouled out players but add a FT each foul (technical)
show old contracts on old roster view
reassess ui module. delete stuff like ui.dropdown. move other functions elsewhere?
  what is the difference between util.viewHelpers, views.components, and ui?
can i get rid of js/api.js?
core.trade refactoring
  validateSavedTids crap should be in trade.js.
  trade.summary stuff should be automatic and stored in tradeStore
  trade and clear buttons should be disabled during gameSim, with message like in team finances
too easy to do the "be bad, get draft picks, keep payroll low, sign free agents, be good" pattern
  free agents are even less willing to sign with the user, even if it's a good team
final score, hall of fame
  influenced by size of city (see: difficulty in views.newLeague)
database changes
  add activeYears multientry like statsTids use for:
    league leaders
    stats
    ratings
gameSim
  use real clock (this.t) rather than number of possessions
  teams should play quicker as the clock runs out
    more generally, teams should have situational awareness
  more penalty for really unbalanced rosters: http://www.reddit.com/r/nba/comments/1j1e6q/i_made_a_singleplayer_basketball_management/cba743c?context=3
  rename compositeRating to compositeRatings (or something better)
    other plural issues in gameSim
  playing time not adding up to 240?
  do some kind of profiling, see if i can speed it up
    any way to speed up PER? maybe break it up into smaller functions so they can be profiled
    do i need all the player composite ratings?
    do i need all the team composite ratings?
    how does performance change/degrade as the years go on?
  bench players should get minutes in blowouts
in lock functions, update g from database before using any potentially sensitive values
  or should these g.whatever variables be set at all if they're sensitive? lid doesn't change obviously, but the others?
AI modules that contain functions which are called to determine actions
  things to regulate...
    draft picks
    signing free agents
    resigning players
    trades
    budget items (like from team finances view)
    releasing/buying out players when over limit
player finder
  search by stats, ratings, or attributes
  trade for button, or sign button if free agent, or draft button if draft prospect
    can this become main UI for drafting (at least fantasy draft)
customize which columns are shown in roster view (and possibly other summary views like trade, free agent, etc)
  http://datatables.net/extras/colvis/
  would it be better just to toggle displays? http://www.reddit.com/r/BasketballGM/comments/1ygzlt/idea_watch_list_toggle_between_stats_and/
    could be different levels of detail (all stats, some stats, min stats) and have these preprogrammed in somehow for toggling to the same number of ratings
AI teams should periodically reorder rosters throughout the season
PER
  slow, particularly after multiple seasons?
    can i have it share a transaction with writing stats in core.game?
some UI showing the state of the team's synergy. maybe like an advisors screen that suggests what kind of player is needed to improve synergy
  also can respond to budget changes
more tests
  https://github.com/gotwarlost/istanbul
  how to run indexeddb-based tests from command line?
  multi-browser testing?
like on team finances page, anywhere else to add help popups?
  should this be abstracted rather than just inline in views?
  inline anything from the manual?
freeAgentMoods should affect AI team signings - or should it?
  for resigning players
  for signing free agents
AI updating of *Budgets and ticket prices
  maybe not necessary at this stage?
  call core.finances.updateBudgetRanks() after
update formulas
  nationalTvRevenue
    same for each team, change contract year by year and display in team finances
  localTvRevenue
    eventually, t.seasons[0].tvContract

FUTURE
------

shot charts showing hot spots (red/yellow/green) based on shot location data
most improved player
If you are simulating through the whole season and execute a trade while simulating, it will continue simulating even if you are over the roster limit. http://www.reddit.com/r/BasketballGM/comments/1xch01/trades_after_season/cfamo73
players from different countries/nationalities
  how to pick names?
IE10 support
  davisjs for knockoutjs links in IE10
    elem.host comes up blank in originChecks
    hacky solution used now (see js/lib/README.md) but maybe this will lead to a real answer: http://stackoverflow.com/q/17641380/786644
  http://www.reddit.com/r/BasketballGM/comments/1kj8nv/i_have_updated_firefox_but_the_game_wont_load_in/
hire/fire different coaches with different strategies
Web workers
  don't seem to actually help performance. maybe help responsiveness
  benchmark?
  would it be worth it to parallelize advstats?
boxplots for shot location stats, plus comparison to NBA data
import/export stuff
  online "locker" that you can sync saved games to
  https://unhosted.org/adventures/7/Adding-remote-storage-to-unhosted-web-apps.html
  data urls don't work with more than ~1 MB. downloadifydoesn't seem to work with more than several MBs of data. until a better solution comes (online sync?), wait.
  league names
    "Edit" button between "Export" and "Delete" - set in leaguesStore and gameAttributes
      move delete/edit/export under one button, "manage". have the 3 buttons pop out in place when you hit manage, then it functions as it does now. popped buttons can be colored too, then
  import league
    ignore old lid
other advanced stats
  WS - http://www.basketball-reference.com/about/ws.html requires Basketball on Paper - http://www.sports-reference.com/cbb/about/ws.html is simpler
  +/- and other stats needed to calculate above - track in game
  APM?
hitting the phase twice shouldn't be possible. but if i, for instance, hit "until preseason" twice quickly, i skip a year
  maybe have something like lock.phaseChangeInProgress? but some timeout would be needed to reset
worth it to switch to closure library?
  http://stackoverflow.com/questions/10782612/what-is-the-sturdiest-way-to-get-the-closure-compilers-type-safety-together-wit
  http://www.nonblocking.io/2011/12/experimental-support-for-common-js-and.html
moving to other cities
expansion teams (add population growth, expand when certain conditions are met)
team finances view
  compare bar graphs against league averages?
different size stadiums, building new stadiums
tv revenue as a variable
  local tv contract - $10 million
    base on tvContractAmount, tvContractExp
    will be a deal from 3 to 5 years in length
    based on...
      region population
      "hype"
      random noise
      "random event" - competition between two networks, Sports TV and The Basketball Channel
    when renegotiating and really bad, the guy pretends not to know you - "Atlanta Herons? Is that the team from the Mexican/Canadian/Arena/Indoor/Xtreme Volleyball/Soccer/Tennis/Racing/Curling/MudWrestling League?"
stat views
  add team dropdown to ratings and stats views - but should this refresh the view, or just filter the DataTable?
    could use something like http://www.datatables.net/extras/thirdparty/ColumnFilterWidgets/DataTables/extras/ColumnFilterWidgets/ to also filter on positions
  playoff/regular season toggle in team/player stats, league leaders
input to helpers.formatCurrency (and all currency in variables everywhere) should be in 1000s of dollars and then only converted to millions when displayed
AI teams should have to deal with fuzz too
"dbChanged" updateEvent - more correct way
  store a list of times and "update events". compare last updated time against that list, and then see the update events. pass as list in "update event" to realtime update
  check everywhere dbChange or lastDbChange is set and see if it should be more refined
    add playerMovement updateEvent, for when a player signs a contract, becomes a free agent, or is traded
bbgmView
  can i do some check to abandon display if idLoading is mismatched with reality? like for clicking a slow link followed by a fast link, in rapid succession, the fast output should show and the slow should be short circuited.
    in practice, this doesn't seem to matter much
  shouldn't have newPhase updateEvent doing much. instead, have an array of what changed in that phase
    (updateEvents.indexOf("newPhase") >= 0 && g.phase === g.PHASE.PRESEASON) should be newSeason
  use req.redirect from POST to manage history optimally
  make it less tied to BBGM specifically. shouldn't depend on BBGM-specific modules like g, ui, and util/viewHelpers
views.teamFinances should merge db call with team.filter to get seasonAttrs, but that will require rewriting seasonAttrs handling in team.filter to handle multiple seasons.
git log -- js/core/gameSimNew.js
live play-by-play simulation
  slow it down http://www.reddit.com/r/BasketballGM/comments/1pu92x/new_feature_live_playbyplay_simulation/cd6xq54?context=3
  change of possession with no rebound/turnover?
  live box score
    update injury icon when player is hurt - would be easy if injury.type was observable, but it's not and I have no idea why. force update with fake name update?
    game clock using min - more accurate, but more complicated - does this even work?
  could fake where the shots are to display graphically
  when someone wins the title, you can see the phase change at the top even while watching the live play-by-play of the last game. this leaks info about who won
  allow the user to make substitutions in realtime
when i have more money, get logos and colors for default teams - maybe by /u/mbingcrosby or /u/R_E_D_D_l_T
multi team trades

Template Stuff
--------------

Below are relatively boring/minor improvements that would make the templating slightly better/faster/clearer/whatever.

gameLog
  boxScore should be observable, but nothing inside should be except gid
dashboard
  observables set right by mapping
    historical things (old scores, old records) don't need to be observable?
    arrays need correct keys
team finances
  smarter updating of player salaries table: contracts should only update on playerMovement
feasible to use knockout for updating datatable? or kogrid?
trade - not fully knockoutifieid
  mapping to update summary.teams.trade, userRoster, otherRoster
  can i do a redirect from post without refreshing everything?
    just call ui.realtimeUpdate which should allow for smart handling
      if trade is accepted/cleared, playerMovement will instigate a refresh of rosters
      if trade is proposed, message will somehow explicity be sent (set in VM? but what if VM not initialized?)
  when to delete stored message?
    at beginning of new propose
    on clear
    when team changes
  changing the trading partner shouldn't refresh the user's team
negotiation
  some things can probably be non-observable
draftSummary
  don't show this season as option if before draft - have an option in components.dropdown
playerNameLabels always updates even if none of the inputs did - why
  if ratings.skills is generated by the mapping plugin, it's an observable array and this fucks things up. it would be a bitch to fix, though.
    quick fix - return a string for templates rather than array.
leaders
  flatten a bit
roster
  check release, buy out, trade for
  flatten a bit
  vars.ptModifiers does not need to be observable
  for some reason, vars.players.injury stuff isnt' observable so days remaining injured doesn't update in a timely manner. very bizarre
dataTables/grid knockout
  examples
    https://github.com/CogShift/Knockout.Extensions
      https://github.com/CogShift/Knockout.Extensions/issues/9
    https://github.com/Knockout-Contrib/KoGrid
    http://chadmullins.com/javascript/knockout-js-series-part-2-binding-knockout-js-to-a-datatables-grid/
inbox
  on new message (can be a newMessage update event), just add to messages list rather than always refreshing
player_
  face display with forward/back button?
    some things become observables - why???
    mapping function not run right the second time - try to create jsfiddle
      arrays are becoming observableArrays
schedule, teamHistory
  partial load of list for updates, like in gameLog list
freeagents
  optimize refreshes
dist
  allow updating box plots without refresh
gameLog
  set more stuff through mapping
reassess dropdown - should it really be called like it is in uiEvery? can i use a computed? problem is, some things need to listen to updateEvents too, not just observables
eventLog
  don't need things inside events observableArray to be observable

---

g = require("globals"); g.dbl.transaction("draftPicks").objectStore("draftPicks").index("season").getAll(g.season).onsuccess = function (event) { console.log(event.target.result); };

g = require("globals"); player = require("core/player"); g.dbl.transaction("players").objectStore("players").get(184).onsuccess = function (event) { console.log(player.genContract(event.target.result)); };

g = require("globals"); g.dbl.transaction("players").objectStore("players").get(184).onsuccess = function (event) { console.log(event.target.result); };

g = require("globals"); player = require("core/player"); g.dbl.transaction("players").objectStore("players").get(170).onsuccess = function (event) { console.log(player.madeHof(event.target.result)); };
g = require("globals"); player = require("core/player"); g.dbl.transaction("players").objectStore("players").get(172).onsuccess = function (event) { console.log(player.madeHof(event.target.result)); };

g = require("globals"); g.dbl.transaction("players").objectStore("players").openCursor(null, "prev").onsuccess = function(event) { console.log(event.target.result.value); };
g = require("globals"); g.dbl.transaction("teams").objectStore("teams").get(3).onsuccess = function (event) { console.log(event.target.result.seasons[0]); }
g = require("globals"); g.dbl.transaction("releasedPlayers").objectStore("releasedPlayers").getAll().onsuccess = function (event) { console.log(event.target.result); }

g.dbl.transaction("gameAttributes").objectStore("gameAttributes").getAll().onsuccess = function (event) { console.dir(event.target.result); };
g = require("globals"); g.dbl.transaction("messages").objectStore("messages").getAll().onsuccess = function (event) { console.dir(event.target.result); };

// Switch teams
var g = require('globals'); g.dbl.transaction("gameAttributes", "readwrite").objectStore("gameAttributes").openCursor("userTid").onsuccess = function (event) { var c = event.target.result; console.log(c.value); c.value.value = 26; console.log(c.value); c.update(c.value); };

---

git fetch origin pull/8/head:pr-8

---




# Pre-JavaScript TODO

player view
  next, previous buttons (also active on left/right arrows)

Client-side game simulation
  Robustness of javascript code
    make sure play menu doesn't ever get stuck - some kind of timeout

include sidebar(s) showing all relevant information, plus make that stuff generated by a separate function so it can eventually be kept static as JS updates other content

security
  csrf protection
    http://flask.pocoo.org/docs/security/#cross-site-request-forgery-csrf
    http://packages.python.org/Flask-SeaSurf/
    http://flask.pocoo.org/snippets/3/
    even for ajax https://docs.djangoproject.com/en/1.2/releases/1.2.5/#csrf-exception-for-ajax-requests

warning when window is closed and game simulation is in progress
  http://stackoverflow.com/questions/1244535/alert-when-browser-window-closed-accidentally
  https://developer.mozilla.org/en/DOM/window.onbeforeunload

# BELOW IS OLD STUFF

UI
--
in team stats tab, allow toggle to show opponent stats

AI (NON-GAMESIM)
----------------
trade
  AI teams trade with each other
  Feedback from trades (way off, that's close, etc)
  "Oh, you again?" after failed trade attempts
  AI teams should be aware of contract lengths and the implications thereof
AI teams release/buy out players to sign a better free agent

---

HOW TO MAKE BBGM HUGE
---------------------

Hire real designer to make logos and layout
Make game everywhere, including iOS and game consoles
Get licensing from NBA - then charge $10 for access to real NBA rosters